<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:udesc="http://java.sun.com/jsf/composite/udesc"                
                template="template.xhtml">   

    <ui:define name="corpo">
        <script src="resources/js/funcoes.js"/>            
        
        <h:form id="formCadastroRoteiro">  
            <p:tree value="#{cadRoteiro.raiz}" 
                    var="node"                     
                    selectionMode="single"                    
                    style="width: auto">
                <p:ajax event="select" 
                        listener="#{cadRoteiro.onNodeSelect}" 
                        update=":tabUnidadeSlideTarefa:formDadosUnidade
                        :tabUnidadeSlideTarefa:formCadastroSlide
                        :tabUnidadeSlideTarefa:formTabelaSlides
                        :tabUnidadeSlideTarefa:formCadastroTarefas
                        :tabUnidadeSlideTarefa:formTabelaTarefas"                             
                        oncomplete="handleMostrar(args); inicializarMapa(); tabUnidadeSlideTarefaWV.select(0);"/>
                <p:treeNode>  
                    <h:outputText value="#{node}"/>  
                </p:treeNode> 
            </p:tree>
        </h:form>       

        <ui:include src="roteirounidadeslidetarefa.xhtml"/>

        <!--DIALOG DELETE SLIDE-->
        <h:form id="formConfirmDialogSlide">                    
            <p:confirmDialog message="#{msg.confirmDelete}" 
                             width="200"
                             header="#{msg.confirm}"
                             severity="alert"
                             widgetVar="confirmDeleteSlide">  
                <p:commandButton value="#{msg.yes}"                                                            
                                 oncomplete="confirmDeleteSlide.hide()"
                                 actionListener="#{cadRoteiro.deleteSlide()}"
                                 update=":tabUnidadeSlideTarefa:formCadastroSlide
                                 :tabUnidadeSlideTarefa:formTabelaSlides
                                 :messages">                                 
                </p:commandButton>
                <p:commandButton value="#{msg.no}" 
                                 oncomplete="confirmDeleteSlide.hide()"
                                 actionListener="#{cadProjeto.novoSlide()}"/>  
            </p:confirmDialog>
        </h:form>
        <!--***-->

        <!--DIALOG DELETE TAREFA-->
        <h:form id="formConfirmDialogTarefa">        
            <p:confirmDialog message="#{msg.confirmDelete}" 
                             width="200"
                             header="#{msg.confirm}"
                             severity="alert"
                             widgetVar="confirmDeleteTarefa">  
                <p:commandButton value="#{msg.yes}" 
                                 oncomplete="confirmDeleteTarefa.hide()"
                                 actionListener="#{cadRoteiro.deleteTarefa()}"
                                 update=":tabUnidadeSlideTarefa:formCadastroTarefas
                                 :tabUnidadeSlideTarefa:formTabelaTarefas
                                 :messages">                                 
                </p:commandButton>
                <p:commandButton value="#{msg.no}" 
                                 oncomplete="confirmDeleteTarefa.hide()"
                                 actionListener="#{cadRoteiro.novaTarefa()}"/>  
            </p:confirmDialog>
        </h:form>
        <!--***-->

    </ui:define> 

</ui:composition>